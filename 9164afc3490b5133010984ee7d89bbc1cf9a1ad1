{
  "comments": [
    {
      "key": {
        "uuid": "ea7e0065_c03a45ec",
        "filename": "ibm_vpd_app.cpp",
        "patchSetId": 9
      },
      "lineNbr": 945,
      "author": {
        "id": 1000338
      },
      "writtenOn": "2021-04-21T10:47:19Z",
      "side": 1,
      "message": "Please remove this, I have seen instances where we get udev events to non-existing files and I would just like this to fail at line 1003",
      "range": {
        "startLine": 945,
        "startChar": 0,
        "endLine": 945,
        "endChar": 34
      },
      "revId": "9164afc3490b5133010984ee7d89bbc1cf9a1ad1",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "71e77751_a715a483",
        "filename": "ibm_vpd_app.cpp",
        "patchSetId": 9
      },
      "lineNbr": 945,
      "author": {
        "id": 1000362
      },
      "writtenOn": "2021-04-21T15:44:30Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "ea7e0065_c03a45ec",
      "range": {
        "startLine": 945,
        "startChar": 0,
        "endLine": 945,
        "endChar": 34
      },
      "revId": "9164afc3490b5133010984ee7d89bbc1cf9a1ad1",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "99624440_e66f7cb6",
        "filename": "ibm_vpd_utils.cpp",
        "patchSetId": 9
      },
      "lineNbr": 322,
      "author": {
        "id": 1000338
      },
      "writtenOn": "2021-04-21T10:47:19Z",
      "side": 1,
      "message": "const string\u0026 ?",
      "range": {
        "startLine": 322,
        "startChar": 25,
        "endLine": 322,
        "endChar": 37
      },
      "revId": "9164afc3490b5133010984ee7d89bbc1cf9a1ad1",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "91435346_61d54137",
        "filename": "ibm_vpd_utils.cpp",
        "patchSetId": 9
      },
      "lineNbr": 322,
      "author": {
        "id": 1000362
      },
      "writtenOn": "2021-04-21T15:44:30Z",
      "side": 1,
      "message": "the variable \"file\" is modified and returned.\nso may be I\u0027ll not return file from this api as its passed by reference.",
      "parentUuid": "99624440_e66f7cb6",
      "range": {
        "startLine": 322,
        "startChar": 25,
        "endLine": 322,
        "endChar": 37
      },
      "revId": "9164afc3490b5133010984ee7d89bbc1cf9a1ad1",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "11c7b003_c7787ad7",
        "filename": "ibm_vpd_utils.cpp",
        "patchSetId": 9
      },
      "lineNbr": 341,
      "author": {
        "id": 1000338
      },
      "writtenOn": "2021-04-21T10:47:19Z",
      "side": 1,
      "message": "Break after the first match? Also how do we handle the case where we did not find the said pattern?",
      "range": {
        "startLine": 341,
        "startChar": 12,
        "endLine": 341,
        "endChar": 33
      },
      "revId": "9164afc3490b5133010984ee7d89bbc1cf9a1ad1",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "97e142fd_3c6e8852",
        "filename": "ibm_vpd_utils.cpp",
        "patchSetId": 9
      },
      "lineNbr": 341,
      "author": {
        "id": 1000338
      },
      "writtenOn": "2021-04-21T11:31:48Z",
      "side": 1,
      "message": "In fact to handle muxed buses, you will have to match the last i2c-*, so we definitely should not break on the first match, so this is OK, please ignore my comment about breaking on teh first match.",
      "parentUuid": "11c7b003_c7787ad7",
      "range": {
        "startLine": 341,
        "startChar": 12,
        "endLine": 341,
        "endChar": 33
      },
      "revId": "9164afc3490b5133010984ee7d89bbc1cf9a1ad1",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6db08310_6263f236",
        "filename": "ibm_vpd_utils.cpp",
        "patchSetId": 9
      },
      "lineNbr": 341,
      "author": {
        "id": 1000362
      },
      "writtenOn": "2021-04-21T15:44:30Z",
      "side": 1,
      "message": "yes.",
      "parentUuid": "97e142fd_3c6e8852",
      "range": {
        "startLine": 341,
        "startChar": 12,
        "endLine": 341,
        "endChar": 33
      },
      "revId": "9164afc3490b5133010984ee7d89bbc1cf9a1ad1",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "daf0cf90_426fd9d7",
        "filename": "ibm_vpd_utils.cpp",
        "patchSetId": 9
      },
      "lineNbr": 345,
      "author": {
        "id": 1000338
      },
      "writtenOn": "2021-04-21T10:47:19Z",
      "side": 1,
      "message": "I just discovered that with kernel 5.10, this value is no longer guaranteed to be 0, therefore, we cannot include this in our VPD JSON.\n\nHow about we modify this a little to get the \u003cbus\u003e-\u003c00addr\u003e and append an /eeprom to it?",
      "range": {
        "startLine": 345,
        "startChar": 37,
        "endLine": 345,
        "endChar": 38
      },
      "revId": "9164afc3490b5133010984ee7d89bbc1cf9a1ad1",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "13379e07_4640a02d",
        "filename": "ibm_vpd_utils.cpp",
        "patchSetId": 9
      },
      "lineNbr": 345,
      "author": {
        "id": 1000362
      },
      "writtenOn": "2021-04-21T15:44:30Z",
      "side": 1,
      "message": "modify what?\nhow does the udev path look in kernel 5.10 ?",
      "parentUuid": "daf0cf90_426fd9d7",
      "range": {
        "startLine": 345,
        "startChar": 37,
        "endLine": 345,
        "endChar": 38
      },
      "revId": "9164afc3490b5133010984ee7d89bbc1cf9a1ad1",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3ad863f3_2cb7b49f",
        "filename": "ibm_vpd_utils.cpp",
        "patchSetId": 9
      },
      "lineNbr": 345,
      "author": {
        "id": 1000338
      },
      "writtenOn": "2021-04-21T16:16:17Z",
      "side": 1,
      "message": "Here\u0027s how it looks on 5.10 (I have a simulation session running with that in case you want to look). For ex:\n\n/sys/devices/platform/ahb/ahb\\:apb/ahb\\:apb\\:bus\\@1e78a000/1e78a480.i2c-bus/i2c-8/8-0051/8-005112/nvmem \u003d\u003d\u003e Notice the 0051(12), this used to be 0051(0)\n\nI guess what I am saying is we simply extract the I2C bus number and address from the udev string and create this out of it:\n/sys/bus/i2c/drivers/at24/\u003cbus\u003e-00\u003caddr\u003e/eeprom",
      "parentUuid": "13379e07_4640a02d",
      "range": {
        "startLine": 345,
        "startChar": 37,
        "endLine": 345,
        "endChar": 38
      },
      "revId": "9164afc3490b5133010984ee7d89bbc1cf9a1ad1",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "562eaf5c_14283d81",
        "filename": "ibm_vpd_utils.cpp",
        "patchSetId": 9
      },
      "lineNbr": 345,
      "author": {
        "id": 1000362
      },
      "writtenOn": "2021-04-21T17:04:29Z",
      "side": 1,
      "message": "ok. the existing json was having all generic nvmem paths \u003chttps://gerrit.openbmc-project.xyz/c/openbmc/meta-ibm/+/36296/2/meta-witherspoon/recipes-phosphor/vpd/ibm-vpd-parser/50001001.json\u003e \nnow to get rid of the nvmem dependency, will make the json to have generic eeprom paths only and will modify this code accrodingly.",
      "parentUuid": "3ad863f3_2cb7b49f",
      "range": {
        "startLine": 345,
        "startChar": 37,
        "endLine": 345,
        "endChar": 38
      },
      "revId": "9164afc3490b5133010984ee7d89bbc1cf9a1ad1",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cc464ae3_5d764447",
        "filename": "ibm_vpd_utils.cpp",
        "patchSetId": 9
      },
      "lineNbr": 352,
      "author": {
        "id": 1000338
      },
      "writtenOn": "2021-04-21T10:47:19Z",
      "side": 1,
      "message": "I guess the same thing could happen here too, although the path here still matches what is in kernel 5.10, I think we should look for (spi)[0-9].0 and append /eeprom to it",
      "range": {
        "startLine": 352,
        "startChar": 123,
        "endLine": 352,
        "endChar": 125
      },
      "revId": "9164afc3490b5133010984ee7d89bbc1cf9a1ad1",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "62d68610_d66ec332",
        "filename": "ibm_vpd_utils.cpp",
        "patchSetId": 9
      },
      "lineNbr": 352,
      "author": {
        "id": 1000362
      },
      "writtenOn": "2021-04-21T15:44:30Z",
      "side": 1,
      "message": "ok.. so you say we won\u0027t have \"\u003cseg\u003e/nvmem\" in udev path in kernel 5.10..\n\nthe path\u0027s end segment looks like \n\n/sys/devices/platform/ahb/ahb:apb/1e79b000.fsi/fsi-master/fsi0/slave@00:00/00:00:00:04/spi_master/spi(digit)/spi(digit).0/eeprom \n\u0026\u0026\n/sys/devices/platform/ahb/ahb:apb/ahb:apb:bus@1e78a000/1e78a480.i2c-bus/\ni2c-(digit)/i2c-(digit-addr)/eeprom  ?",
      "parentUuid": "cc464ae3_5d764447",
      "range": {
        "startLine": 352,
        "startChar": 123,
        "endLine": 352,
        "endChar": 125
      },
      "revId": "9164afc3490b5133010984ee7d89bbc1cf9a1ad1",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dc920f4f_ef2c54c2",
        "filename": "ibm_vpd_utils.cpp",
        "patchSetId": 9
      },
      "lineNbr": 352,
      "author": {
        "id": 1000338
      },
      "writtenOn": "2021-04-21T16:16:17Z",
      "side": 1,
      "message": "We may or may not have nvmem. I think all we really need is the spi bus number to create:\n/sys/bus/spi/drivers/at25/spi\u003cbusnum\u003e.0/eeprom",
      "parentUuid": "62d68610_d66ec332",
      "range": {
        "startLine": 352,
        "startChar": 123,
        "endLine": 352,
        "endChar": 125
      },
      "revId": "9164afc3490b5133010984ee7d89bbc1cf9a1ad1",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2f697259_53b888c0",
        "filename": "ibm_vpd_utils.cpp",
        "patchSetId": 9
      },
      "lineNbr": 352,
      "author": {
        "id": 1000362
      },
      "writtenOn": "2021-04-21T17:04:29Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "dc920f4f_ef2c54c2",
      "range": {
        "startLine": 352,
        "startChar": 123,
        "endLine": 352,
        "endChar": 125
      },
      "revId": "9164afc3490b5133010984ee7d89bbc1cf9a1ad1",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "870f16b0_4a14f430",
        "filename": "ibm_vpd_utils.cpp",
        "patchSetId": 9
      },
      "lineNbr": 368,
      "author": {
        "id": 1000338
      },
      "writtenOn": "2021-04-21T10:47:19Z",
      "side": 1,
      "message": "Break after first match? What if nothing matches?",
      "range": {
        "startLine": 368,
        "startChar": 12,
        "endLine": 368,
        "endChar": 32
      },
      "revId": "9164afc3490b5133010984ee7d89bbc1cf9a1ad1",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "875f7265_202f5aca",
        "filename": "ibm_vpd_utils.cpp",
        "patchSetId": 9
      },
      "lineNbr": 368,
      "author": {
        "id": 1000362
      },
      "writtenOn": "2021-04-21T15:44:30Z",
      "side": 1,
      "message": "should I really need a break here for spi paths?\n\nWhat if nothing matches?\nI can have a match.size() check and throw error if there is no match.",
      "parentUuid": "870f16b0_4a14f430",
      "range": {
        "startLine": 368,
        "startChar": 12,
        "endLine": 368,
        "endChar": 32
      },
      "revId": "9164afc3490b5133010984ee7d89bbc1cf9a1ad1",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "61ead124_8fec49d8",
        "filename": "ibm_vpd_utils.cpp",
        "patchSetId": 9
      },
      "lineNbr": 368,
      "author": {
        "id": 1000362
      },
      "writtenOn": "2021-04-22T04:10:55Z",
      "side": 1,
      "message": "caught the case where there is no pattern match in ps:10",
      "parentUuid": "875f7265_202f5aca",
      "range": {
        "startLine": 368,
        "startChar": 12,
        "endLine": 368,
        "endChar": 32
      },
      "revId": "9164afc3490b5133010984ee7d89bbc1cf9a1ad1",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    }
  ]
}